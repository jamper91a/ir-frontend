<ion-header>
  <ion-toolbar>
    <ion-title>{{ 'dealers' | translate}}</ion-title>
  </ion-toolbar>

</ion-header>


<ion-content class="ion-padding">

  <form (submit)="create()">
    <h1>
      {{ 'new_dealer' | translate}}
    </h1>
    <ion-list>
      <ion-item>
        <ion-label  position="stacked">{{ 'email' | translate }}</ion-label>
        <ion-input type="email" [(ngModel)]="request.user.username" name="email"></ion-input>
      </ion-item>
      <ion-row>
        <ion-col size="6">
          <ion-item>
            <ion-label  position="stacked">{{ 'password' | translate }}</ion-label>
            <ion-input type="password" [(ngModel)]="request.user.password" name="email"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="6">
          <ion-item>
            <ion-label position="stacked">{{ 'repeat_password' | translate }}</ion-label>
            <ion-input type="password" [(ngModel)]="request.user.rpassword" name="password"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
        <ion-row>
          <ion-col size="6">
            <ion-item>
            <ion-label position="stacked">{{ 'user_name' | translate }}</ion-label>
            <ion-input type="text" [(ngModel)]="request.user.name" name="name"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="6">
            <ion-item>
            <ion-label position="stacked">{{ 'dealer_name' | translate }}</ion-label>
            <ion-input type="text" [(ngModel)]="request.dealer.name" name="dealer_name"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>

      <div padding>
        <ion-button type="submit" >
          {{ 'create' | translate }}
        </ion-button>
      </div>


    </ion-list>
  </form>

  <ion-list>
    <ion-list-header>
      <ion-label>{{'current_dealers' | translate}}</ion-label>
    </ion-list-header>
    <ion-progress-bar type="indeterminate" *ngIf="!dealers"></ion-progress-bar>

    <ng-container *ngIf="dealers">
      <ion-searchbar placeholder="{{ 'dealers' | translate}}" debounce="500" (ionChange)="filterItems($event)"></ion-searchbar>
      <ion-virtual-scroll [items]="dealers.data" approxItemHeight="320px" >
      <!--<ion-item-sliding *ngFor="let dealer of dealers.data">-->
      <ion-item-sliding *virtualItem="let dealer" (click)="goToDealer(dealer)">
        <ion-item color="{{dealer.user.active ? '' : 'light'}}">
          <ion-label>{{dealer.name}}</ion-label>
          <ion-note slot="end">{{dealer.user.name}}</ion-note>
        </ion-item>
      </ion-item-sliding>
      </ion-virtual-scroll>
    </ng-container>
  </ion-list>
</ion-content>
